---
author: pdh
date: today
stitch:
  defaults:
    dir: .stitch/ex00
    log: debug
    inc: "cbx:fcb out art err"
...

# A codeblock with defaults

Writing string to `$1` in codeblock `#id1.0` means the png-file won't contain a
valid image.  Using `--lua-filter stitch.lua` leads to errors.  PDF file not
created, pdf-engine complains:

    Error producing PDF.
    ! Unable to load picture or PDF file '/tmp/tex2pdf.-c6089afa5fa2caa5/.stitch/ex
    00/id0-a18d3d9b5791d689bb54a6688efdd6a59b3a3f77.png'.
    <to be read again>
                       }
    l.121 }

    make: *** [Makefile:22: ex00.pdf] Error 43

CodeBlock below:

```{#id0 .stitch inc="cbx:fcb out:fcb err:fcb art art:NoCaptain-DontDoIt"}
#! /usr/bin/env bash
echo -e "# stderr\r\r$0" >&2
set -x
echo -e "# stdout\r\r$0" >&1
echo -e "# artifact\r\r$0" > $1
```

# read stderr as gfm markdown

```{#id1 .stitch inc="cbx:fcb art:illegal err!gfm"}
#! /usr/bin/env bash
echo -e "# stderr header\r\n scriptname: $0" >&2
set -x
echo -e "# stdout\r\n$0" >&1
echo -e "# artifact\r\n$0" > $1
```

# two cb's without an id

```{#id2 .stitch inc="cbx:fcb out"}
#! /usr/bin/env bash
echo "first cb w/o an id"
```

followed by a second one

```{#id3 .stitch inc="cbx:fcb out"}
#! /usr/bin/env bash
echo "second cb w/o an id"
```
